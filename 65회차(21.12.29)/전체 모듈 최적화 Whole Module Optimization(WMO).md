## 2. 전체 모듈 최적화 Whole Module Optimization(WMO)

### 1. 단일 파일 컴파일

- 기본적으로 스위프트는 각각의 파일을 개별적으로 컴파일한다. (모듈 내의 파일들을 하나씩 컴파일)

  but, 이렇게 하면 최적화가 잘 안될 수 있다.(= 컴파일 시간이 길어진다.)

  - 모듈?

    스위프트 파일들의 묶음. 각 모듈은 하나의 유닛 단위로 컴파일된다.

  - 단일 파일 컴파일

    최적화의 영역: 단일 파일 하나

    👉 컴파일러는 최적화를 할 때, 파일 내에서 정의되지 않은 다른 함수가 어떤 형태로 구현되어 있는지 모른다.

    ​	예를 들어, **Animal.swift에 클래스 Animal**이 정의되어 있고

    ​					**Dog.swift의 클래스 Dog가 Animal 클래스를 상속 **받는다면,

    ​	Animal.swift 파일을 컴파일 하는 동안에 Animal 클래스가 다른 파일에서 상속을 받고 있는지 아닌지 알 수 없다.

     

- 여기에서 ***최적화***란?

  : 코드에서 성능을 낮출 수 있는 부분, 높일 수 있는 부분을 확인한다.

​		: 여러 파일들간의 관계는 서로 복잡하게 얽혀 있기 때문에, 서로 연관되어있는 파일들이 어떻게 맞물려있는지, 이런 관계가 성능에 어떤 영향을 미치는지에 대해서 확인한다.

### 2. 전체 모듈 최적화(WMO)

- 따라서, 전체 프로그램을 **하나의 파일**처럼 컴파일을 하고, 각각의 파일을 **하나의 모듈**처럼 컴파일

  : 하나의 모듈을 컴파일 할 때, 모듈 전체를 확인

  👉 전체 모듈 최적화 단계를 거침(***WMO***)

  예를 들어, Animal.swift에서 Animal 클래스를 정의했다면

  ​				**모듈 전체를 확인**하여 Animal 클래스를 상속 받는 클래스, 오버라이딩 하는 클래스 확인

  👉 아무곳에서도 상속을 하지 않는다면 내부적으로 final을 붙여서 Static Dispatch로 동작하게 한다.

- 컴파일 자체의 시간은 오래 걸릴 수 있지만, 실행은 더 빨리 이루어질 수 있다.


</br>
🔖 참고

- SeSAC iOS 개발자 데뷔 과정 강의 자료
- https://brunch.co.kr/@joonwonlee/14
- https://babbab2.tistory.com/145
